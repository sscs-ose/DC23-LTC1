v {xschem version=3.1.0 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
N -460 300 -460 320 {
lab=GND}
N -460 220 -460 240 {
lab=VINP}
N -670 200 -670 220 {
lab=GND}
N -570 200 -570 220 {
lab=GND}
N -570 120 -570 140 {
lab=VDD}
N -670 100 -670 140 {
lab=VSS}
N -380 240 -380 260 {
lab=GND}
N -380 160 -380 180 {
lab=VINN}
N -750 200 -750 240 {
lab=VSS}
N -750 100 -750 140 {
lab=VBIAS1}
N -790 -550 -790 -480 {
lab=VDD}
N -810 -450 -790 -450 {
lab=VDD}
N -810 -490 -810 -450 {
lab=VDD}
N -810 -490 -790 -490 {
lab=VDD}
N -750 -450 -670 -450 {
lab=VBIAS1}
N -790 -420 -790 -370 {
lab=VBIAS1}
N -790 -370 -720 -370 {
lab=VBIAS1}
N -720 -450 -720 -370 {
lab=VBIAS1}
N -790 -370 -790 -320 {
lab=VBIAS1}
N -1410 -550 -1410 -480 {
lab=VDD}
N -1430 -450 -1410 -450 {
lab=VDD}
N -1430 -490 -1430 -450 {
lab=VDD}
N -1430 -490 -1410 -490 {
lab=VDD}
N -1370 -450 -1290 -450 {
lab=VBIAS1}
N -1410 -160 -1410 -90 {
lab=VSS}
N -1370 -190 -1330 -190 {
lab=VB3}
N -1330 -240 -1330 -190 {
lab=VB3}
N -1410 -240 -1410 -220 {
lab=VSS}
N -1410 -280 -1410 -240 {
lab=VSS}
N -1370 -310 -1330 -310 {
lab=VB3}
N -1330 -310 -1330 -240 {
lab=VB3}
N -1330 -380 -1330 -310 {
lab=VB3}
N -1410 -380 -1330 -380 {
lab=VB3}
N -1410 -420 -1410 -380 {
lab=VB3}
N -1410 -380 -1410 -340 {
lab=VB3}
N -1490 -310 -1410 -310 {
lab=VSS}
N -1430 -190 -1430 -160 {
lab=VSS}
N -1430 -160 -1410 -160 {
lab=VSS}
N -1680 -550 -1680 -480 {
lab=VDD}
N -1700 -450 -1680 -450 {
lab=VDD}
N -1700 -490 -1700 -450 {
lab=VDD}
N -1700 -490 -1680 -490 {
lab=VDD}
N -1640 -450 -1560 -450 {
lab=VBIAS1}
N -1680 -420 -1680 -300 {
lab=VBIASN}
N -1680 -240 -1680 -180 {
lab=VSS}
N -1680 -270 -1650 -270 {
lab=VSS}
N -1650 -270 -1650 -240 {
lab=VSS}
N -1680 -240 -1650 -240 {
lab=VSS}
N -1750 -270 -1720 -270 {
lab=VBIASN}
N -1750 -340 -1750 -270 {
lab=VBIASN}
N -1750 -340 -1680 -340 {
lab=VBIASN}
N 670 -480 670 -410 {
lab=VB2}
N 670 -380 680 -380 {
lab=VSS}
N 680 -380 680 -350 {
lab=VSS}
N 670 -350 680 -350 {
lab=VSS}
N 670 -350 670 -290 {
lab=VSS}
N 570 -380 630 -380 {
lab=VBIASN}
N 650 -510 670 -510 {
lab=VDD}
N 670 -600 670 -540 {
lab=VB2}
N 590 -510 650 -510 {
lab=VDD}
N 670 -720 670 -660 {
lab=VDD}
N 710 -630 740 -630 {
lab=VB2}
N 670 -460 740 -460 {
lab=VB2}
N 710 -510 740 -510 {
lab=VB2}
N 650 -630 670 -630 {
lab=VDD}
N 650 -660 650 -630 {
lab=VDD}
N 650 -660 670 -660 {
lab=VDD}
N -1910 -560 -1910 -490 {
lab=VDD}
N -1930 -460 -1910 -460 {
lab=VDD}
N -1930 -500 -1930 -460 {
lab=VDD}
N -1930 -500 -1910 -500 {
lab=VDD}
N -1910 -270 -1910 -200 {
lab=VSS}
N -1930 -300 -1910 -300 {
lab=VSS}
N -1930 -300 -1930 -270 {
lab=VSS}
N -1930 -270 -1910 -270 {
lab=VSS}
N -1870 -300 -1830 -300 {
lab=VBIASN}
N -1830 -300 -1830 -270 {
lab=VBIASN}
N -1830 -270 -1750 -270 {
lab=VBIASN}
N -1910 -430 -1910 -330 {
lab=IBIAS2}
N -1870 -460 -1850 -460 {
lab=IBIAS2}
N -1850 -460 -1850 -400 {
lab=IBIAS2}
N -1910 -400 -1850 -400 {
lab=IBIAS2}
N 740 -630 740 -570 {
lab=VB2}
N 740 -510 740 -460 {
lab=VB2}
N 740 -570 740 -510 {
lab=VB2}
N 670 -480 690 -480 {
lab=VB2}
N 690 -540 690 -480 {
lab=VB2}
N 670 -540 690 -540 {
lab=VB2}
N -1430 -190 -1410 -190 {
lab=VSS}
N -1410 -220 -1410 -190 {
lab=VSS}
N -340 -620 -340 -580 {
lab=VDD}
N -320 -620 -320 -580 {
lab=VSS}
N -220 -510 -170 -510 {
lab=OUT}
N -480 -520 -430 -520 {
lab=VINP}
N -480 -500 -430 -500 {
lab=VINN}
N -350 -430 -350 -390 {
lab=VB3}
N -330 -430 -330 -390 {
lab=VB2}
N -310 -430 -310 -390 {
lab=VBIAS1}
C {devices/code_shown.sym} -990 330 0 0 {name=MODELS only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
"}
C {devices/code_shown.sym} 10 -270 0 0 {name=NGSPICE only_toplevel=true
value="
.include "pex_fold_cascode_opamp_mag.spice"
.control
*save all
*.options savecurrents
save all 


*dc V6 0.95 1.05 0.1m
*plot v(OUT)

ac dec 50 1 1e9
let tf = out/vinp
let gain = db(tf)
let phase = (180/pi)*ph(tf)

plot gain
plot phase

*write pmos_nmos.raw
*let vdiff = @m.xm1.m0[vdsat]+vds
*plot @m.xm1.m0[vdsat]
*tran 1u 2m
*let gain = (maximum(out1)-minimum(out2) )* 1000
*print vbb


*plot vdiff
display all
.endc
"}
C {devices/vsource.sym} -460 270 0 0 {name=V3 value="0 AC 1m"}
C {devices/gnd.sym} -460 320 0 0 {name=l1 lab=GND}
C {devices/lab_pin.sym} -460 220 0 0 {name=p12 sig_type=std_logic lab=VINP}
C {devices/vsource.sym} -670 170 0 0 {name=V4 value=0}
C {devices/gnd.sym} -670 220 0 0 {name=l4 lab=GND}
C {devices/vsource.sym} -570 170 0 0 {name=V5 value=3.3}
C {devices/gnd.sym} -570 220 0 0 {name=l5 lab=GND}
C {devices/lab_wire.sym} -570 120 0 0 {name=p14 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} -670 120 0 0 {name=p15 sig_type=std_logic lab=VSS}
C {devices/vsource.sym} -380 210 0 0 {name=V6 value="0 AC 1m 180"}
C {devices/gnd.sym} -380 260 0 0 {name=l6 lab=GND}
C {devices/lab_pin.sym} -380 160 0 0 {name=p16 sig_type=std_logic lab=VINN}
C {devices/isource.sym} -750 170 0 0 {name=I0 value=20u}
C {devices/lab_wire.sym} -750 230 0 0 {name=p3 sig_type=std_logic lab=VSS}
C {symbols/pfet_03v3.sym} -770 -450 0 1 {name=M15
L=0.56u
W=4u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -790 -520 0 0 {name=p10 sig_type=std_logic lab=VDD}
C {symbols/pfet_03v3.sym} -1390 -450 0 1 {name=M16
L=0.56u
W=4u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -1410 -530 0 0 {name=p24 sig_type=std_logic lab=VDD}
C {symbols/nfet_03v3.sym} -1390 -310 0 1 {name=M17
L=0.56u
W=2u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -1470 -310 0 0 {name=p26 sig_type=std_logic lab=VSS}
C {devices/lab_wire.sym} -1330 -350 0 1 {name=p27 sig_type=std_logic lab=VB3}
C {symbols/pfet_03v3.sym} -1660 -450 0 1 {name=M19
L=0.56u
W=4u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -1680 -530 0 0 {name=p28 sig_type=std_logic lab=VDD}
C {symbols/nfet_03v3.sym} -1700 -270 0 0 {name=M20
L=0.56u
W=2u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -1750 -300 0 0 {name=p30 sig_type=std_logic lab=VBIASN}
C {symbols/pfet_03v3.sym} 690 -630 0 1 {name=M26
L=0.56u
W=900n
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 650 -380 0 0 {name=M28
L=0.56u
W=2u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} 670 -700 0 0 {name=p39 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 600 -510 0 0 {name=p40 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 670 -300 0 0 {name=p41 sig_type=std_logic lab=VSS}
C {devices/lab_wire.sym} 580 -380 0 0 {name=p42 sig_type=std_logic lab=VBIASN}
C {devices/lab_wire.sym} 740 -460 0 1 {name=p43 sig_type=std_logic lab=VB2}
C {devices/lab_wire.sym} -1410 -110 0 0 {name=p48 sig_type=std_logic lab=VSS}
C {devices/lab_wire.sym} -1680 -200 0 0 {name=p52 sig_type=std_logic lab=VSS}
C {symbols/pfet_03v3.sym} -1890 -460 0 1 {name=M29
L=0.28u
W=2u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -1910 -540 0 0 {name=p53 sig_type=std_logic lab=VDD}
C {symbols/nfet_03v3.sym} -1890 -300 0 1 {name=M30
L=0.56u
W=2u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/lab_wire.sym} -1850 -400 0 1 {name=p54 sig_type=std_logic lab=IBIAS2}
C {devices/lab_wire.sym} -1910 -220 0 0 {name=p67 sig_type=std_logic lab=VSS}
C {devices/lab_wire.sym} -340 -600 0 0 {name=p31 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} -320 -600 0 1 {name=p32 sig_type=std_logic lab=VSS}
C {devices/lab_wire.sym} -350 -410 3 0 {name=p33 sig_type=std_logic lab=VB3}
C {devices/lab_wire.sym} -330 -410 3 0 {name=p34 sig_type=std_logic lab=VB2}
C {devices/lab_wire.sym} -310 -410 1 1 {name=p36 sig_type=std_logic lab=VBIAS1}
C {devices/lab_wire.sym} -190 -510 0 1 {name=p37 sig_type=std_logic lab=OUT}
C {devices/lab_wire.sym} -470 -500 0 0 {name=p38 sig_type=std_logic lab=VINN}
C {devices/lab_wire.sym} -470 -520 0 0 {name=p44 sig_type=std_logic lab=VINP}
C {pex_fold_cascode_opamp_mag.sym} -330 -510 0 0 {name=x1}
C {devices/lab_wire.sym} -750 110 2 1 {name=p4 sig_type=std_logic lab=VBIAS1}
C {devices/lab_wire.sym} -690 -450 2 0 {name=p1 sig_type=std_logic lab=VBIAS1}
C {devices/lab_wire.sym} -1330 -450 2 0 {name=p6 sig_type=std_logic lab=VBIAS1}
C {devices/lab_wire.sym} -1600 -450 2 0 {name=p7 sig_type=std_logic lab=VBIAS1}
