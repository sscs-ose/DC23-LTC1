v {xschem version=3.1.0 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
N 320 -90 440 -90 {
lab=Vb1}
N 280 -60 280 -20 {
lab=#net1}
N 480 -60 480 -20 {
lab=#net2}
N 320 -190 440 -190 {
lab=Vb2}
N 280 -160 280 -120 {
lab=OUT2}
N 480 -160 480 -120 {
lab=OUT1}
N 320 -290 440 -290 {
lab=Vb3}
N 280 -260 280 -220 {
lab=#net3}
N 480 -260 480 -220 {
lab=#net4}
N 280 -330 280 -320 {
lab=VDD}
N 280 -350 480 -350 {
lab=VDD}
N 480 -330 480 -320 {
lab=VDD}
N 280 40 280 70 {
lab=Vp}
N 380 70 480 70 {
lab=Vp}
N 480 40 480 70 {
lab=Vp}
N 380 70 380 120 {
lab=Vp}
N 380 200 380 220 {
lab=VSS}
N -70 90 -70 120 {
lab=#net5}
N -70 180 -70 220 {
lab=VSS}
N 140 150 340 150 {
lab=#net5}
N -70 -100 -70 -40 {
lab=#net5}
N -70 -100 140 -100 {
lab=#net5}
N 140 -100 140 150 {
lab=#net5}
N 280 70 380 70 {
lab=Vp}
N -70 -130 -70 -100 {
lab=#net5}
N -30 150 140 150 {
lab=#net5}
N 280 10 480 10 {
lab=VSS}
N 480 -90 540 -90 {
lab=VSS}
N 230 -90 280 -90 {
lab=VSS}
N 480 -290 520 -290 {
lab=VDD}
N 520 -330 520 -290 {
lab=VDD}
N 480 -330 520 -330 {
lab=VDD}
N 250 -290 280 -290 {
lab=VDD}
N 250 -330 250 -290 {
lab=VDD}
N 250 -330 280 -330 {
lab=VDD}
N -70 220 380 220 {
lab=VSS}
N 800 -130 800 -80 {
lab=#net6}
N 800 -210 800 -190 {
lab=Vb1}
N 720 -210 800 -210 {
lab=Vb1}
N 720 -210 720 -160 {
lab=Vb1}
N 720 -160 760 -160 {
lab=Vb1}
N 720 -160 720 -50 {
lab=Vb1}
N 720 -50 760 -50 {
lab=Vb1}
N 800 -20 800 20 {
lab=Vp}
N 380 150 420 150 {
lab=VSS}
N 420 150 420 200 {
lab=VSS}
N 380 200 420 200 {
lab=VSS}
N 480 -350 480 -330 {
lab=VDD}
N 280 -350 280 -330 {
lab=VDD}
N 800 -240 800 -210 {
lab=Vb1}
N 380 180 380 200 {
lab=VSS}
N -110 150 -70 150 {
lab=VSS}
N -110 150 -110 200 {
lab=VSS}
N -110 200 -70 200 {
lab=VSS}
N 1040 -210 1040 -150 {
lab=#net7}
N 1040 -240 1060 -240 {
lab=VDD}
N 1040 -120 1060 -120 {
lab=#net7}
N 1060 -160 1060 -120 {
lab=#net7}
N 1040 -160 1060 -160 {
lab=#net7}
N 1060 -280 1060 -240 {
lab=VDD}
N 1040 -280 1060 -280 {
lab=VDD}
N 1040 -280 1040 -270 {
lab=VDD}
N 1040 -300 1040 -280 {
lab=VDD}
N 1040 -90 1040 -50 {
lab=Vb2}
N 970 -120 1000 -120 {
lab=Vb2}
N 970 -120 970 -80 {
lab=Vb2}
N 970 -80 1040 -80 {
lab=Vb2}
N 970 -240 970 -120 {
lab=Vb2}
N 970 -240 1000 -240 {
lab=Vb2}
N 1270 -200 1270 -140 {
lab=#net8}
N 1270 -230 1290 -230 {
lab=VDD}
N 1270 -110 1290 -110 {
lab=#net8}
N 1290 -150 1290 -110 {
lab=#net8}
N 1270 -150 1290 -150 {
lab=#net8}
N 1290 -270 1290 -230 {
lab=VDD}
N 1270 -270 1290 -270 {
lab=VDD}
N 1270 -270 1270 -260 {
lab=VDD}
N 1270 -290 1270 -270 {
lab=VDD}
N 1270 -80 1270 -40 {
lab=Vb3}
N 1200 -110 1230 -110 {
lab=Vb2}
N 1200 -230 1230 -230 {
lab=Vb3}
N 1170 -230 1200 -230 {
lab=Vb3}
N 1170 -230 1170 -60 {
lab=Vb3}
N 1170 -60 1270 -60 {
lab=Vb3}
N 520 10 560 10 {
lab=IN2}
N 200 10 240 10 {
lab=IN1}
N 480 -140 550 -140 {
lab=OUT1}
N 190 -140 280 -140 {
lab=OUT2}
N -70 -230 -70 -190 {
lab=VDD}
N 1040 10 1040 60 {
lab=VSS}
N 1270 20 1270 70 {
lab=VSS}
N 800 -340 800 -300 {
lab=VDD}
N 800 -160 860 -160 {
lab=VSS}
N 860 -160 860 -50 {
lab=VSS}
N 800 -50 860 -50 {
lab=VSS}
N 380 -380 380 -350 {
lab=VDD}
N 380 -470 380 -440 {
lab=VSS}
N 140 220 140 260 {
lab=VSS}
N 140 320 140 360 {
lab=GND}
N 740 230 740 260 {
lab=IN1}
N 740 320 740 350 {
lab=VSS}
N 910 230 910 260 {
lab=IN2}
N 910 320 910 350 {
lab=VSS}
N 250 -190 280 -190 {
lab=#net3}
N 250 -230 250 -190 {
lab=#net3}
N 250 -230 280 -230 {
lab=#net3}
N 480 -190 500 -190 {
lab=#net4}
N 500 -230 500 -190 {
lab=#net4}
N 480 -230 500 -230 {
lab=#net4}
N -70 -40 -70 90 {
lab=#net5}
C {symbols/nfet_03v3.sym} 300 -90 0 1 {name=M3
L=0.56u
W=17u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 460 -90 0 0 {name=M4
L=0.56u
W=17u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 260 10 0 0 {name=M1
L=0.56u
W=17u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 500 10 0 1 {name=M2
L=0.56u
W=17u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 300 -190 0 1 {name=M5
L=0.56u
W=19u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 460 -190 0 0 {name=M6
L=0.56u
W=19u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 300 -290 0 1 {name=M7
L=0.56u
W=19u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 460 -290 0 0 {name=M8
L=0.56u
W=19u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 360 150 0 0 {name=M9
L=0.56u
W=34u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} -50 150 0 1 {name=M12
L=0.56u
W=5u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 780 -160 0 0 {name=M13
L=0.84u
W=0.42u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 780 -50 0 0 {name=M14
L=0.84u
W=0.42u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/lab_pin.sym} 420 70 0 0 {name=p1 sig_type=std_logic lab=Vp}
C {devices/lab_pin.sym} 800 10 0 0 {name=p2 sig_type=std_logic lab=Vp}
C {devices/lab_pin.sym} 390 -90 0 0 {name=p3 sig_type=std_logic lab=Vb1}
C {devices/lab_pin.sym} 800 -230 0 0 {name=p4 sig_type=std_logic lab=Vb1}
C {devices/lab_pin.sym} 140 220 0 0 {name=p5 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} 390 10 0 0 {name=p7 sig_type=std_logic lab=VSS}
C {symbols/pfet_03v3.sym} 1020 -240 0 0 {name=M15
L=0.56u
W=0.30u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1020 -120 0 0 {name=M16
L=0.56u
W=0.36u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {devices/lab_pin.sym} 380 -350 0 0 {name=p10 sig_type=std_logic lab=VDD}
C {devices/lab_pin.sym} 1040 -300 0 0 {name=p11 sig_type=std_logic lab=VDD}
C {devices/lab_pin.sym} 380 -190 0 0 {name=p12 sig_type=std_logic lab=Vb2}
C {devices/lab_pin.sym} 970 -170 2 0 {name=p13 sig_type=std_logic lab=Vb2}
C {symbols/pfet_03v3.sym} 1250 -230 0 0 {name=M17
L=0.56u
W=0.36u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1250 -110 0 0 {name=M18
L=0.56u
W=0.36u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {devices/lab_pin.sym} 1270 -290 0 0 {name=p14 sig_type=std_logic lab=VDD}
C {devices/lab_pin.sym} 1210 -110 0 0 {name=p15 sig_type=std_logic lab=Vb2}
C {devices/lab_pin.sym} 380 -290 0 0 {name=p16 sig_type=std_logic lab=Vb3}
C {devices/lab_pin.sym} 1170 -180 2 0 {name=p17 sig_type=std_logic lab=Vb3}
C {devices/lab_pin.sym} 550 10 2 0 {name=p20 sig_type=std_logic lab=IN2}
C {devices/lab_pin.sym} 210 10 0 0 {name=p21 sig_type=std_logic lab=IN1}
C {devices/lab_pin.sym} 190 -140 0 0 {name=p22 sig_type=std_logic lab=OUT2}
C {devices/lab_pin.sym} 540 -140 2 0 {name=p23 sig_type=std_logic lab=OUT1}
C {devices/isource.sym} -70 -160 0 0 {name=I0 value=30u}
C {devices/isource.sym} 1040 -20 0 0 {name=I1 value=2u}
C {devices/isource.sym} 1270 -10 0 0 {name=I2 value=2u}
C {devices/isource.sym} 800 -270 0 0 {name=I3 value=2u}
C {devices/lab_pin.sym} -70 -230 0 0 {name=p26 sig_type=std_logic lab=VDD}
C {devices/lab_pin.sym} 800 -330 0 0 {name=p27 sig_type=std_logic lab=VDD}
C {devices/lab_pin.sym} 1040 40 0 0 {name=p28 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} 1270 50 0 0 {name=p29 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} 860 -100 0 0 {name=p30 sig_type=std_logic lab=VSS}
C {devices/vsource.sym} 380 -410 2 0 {name=VDD value=3.3}
C {devices/vsource.sym} 140 290 0 0 {name=VSS value=0}
C {devices/gnd.sym} 140 360 0 0 {name=l1 lab=GND}
C {devices/lab_pin.sym} 380 -460 0 0 {name=p31 sig_type=std_logic lab=VSS}
C {devices/vsource.sym} 740 290 0 0 {name=V1 value= "1.5 AC 1u"}
C {devices/lab_pin.sym} 740 240 0 0 {name=p32 sig_type=std_logic lab=IN1}
C {devices/lab_pin.sym} 740 340 0 0 {name=p33 sig_type=std_logic lab=VSS}
C {devices/vsource.sym} 910 290 0 0 {name=V2 value="1.5 AC 1u 180"}
C {devices/lab_pin.sym} 910 240 0 0 {name=p34 sig_type=std_logic lab=IN2}
C {devices/lab_pin.sym} 910 340 0 0 {name=p35 sig_type=std_logic lab=VSS}
C {devices/code_shown.sym} 950 -460 0 0 {name=MODELS only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
"}
C {devices/code_shown.sym} 2290 -440 0 1 {name=NGSPICE only_toplevel=true
value="

.control
save all @m.xm1.m0[vdsat] @m.xm2.m0[vdsat] @m.xm1.m0[vds] @m.xm2.m0[vds]
save all @m.xm3.m0[vdsat] @m.xm4.m0[vdsat] @m.xm3.m0[vds] @m.xm4.m0[vds]
save all @m.xm5.m0[vdsat] @m.xm6.m0[vdsat] @m.xm5.m0[vds] @m.xm6.m0[vds]
save all @m.xm7.m0[vdsat] @m.xm8.m0[vdsat] @m.xm7.m0[vds] @m.xm8.m0[vds]
save all @m.xm9.m0[vdsat] @m.xm9.m0[vdsat] @m.xm12.m0[vds] @m.xm12.m0[vds]
save all @m.xm1.m0[id] @m.xm2.m0[id] @m.xm3.m0[id] @m.xm4.m0[id]
save all @m.xm9.m0[id] @m.xm10.m0[id] @m.xm11.m0[id] @m.xm12.m0[id] 
save all @m.xm10.m0[vdsat] @m.xm11.m0[vdsat] @m.xm10.m0[vds] @m.xm11.m0[vds]
dc V2 1.3 1.7 1m
*ac dec 50 1 100e9
let tf = OUT1/IN1
let gain = db(tf)
let phase = (180/pi)*ph(tf)
*plot gain
*plot phase
let id1 = @m.xm1.m0[id] 
let id2 = @m.xm2.m0[id]
let id3 = @m.xm3.m0[id] 
let id4 = @m.xm4.m0[id]
*plot id1 id2 id3 id4
let id9 = @m.xm9.m0[id] 
let id12 = @m.xm12.m0[id]
*plot id9 id10 id11 id12
let Vov1 = @m.xm1.m0[vdsat] 
let Vds1 = @m.xm1.m0[vds]
let Vov2 = @m.xm2.m0[vdsat] 
let Vds2 = @m.xm2.m0[vds]
*plot Vov1 Vov2 Vds1 Vds2
let Vov3 = @m.xm3.m0[vdsat]
let Vov4 = @m.xm4.m0[vdsat]
let Vds3 = @m.xm3.m0[vds]
let Vds4 = @m.xm4.m0[vds]
*plot Vov3 Vov4 Vds3 Vds4
let Vov5 = @m.xm5.m0[vdsat]
let Vov6 = @m.xm6.m0[vdsat]
let Vds5 = @m.xm5.m0[vds]
let Vds6 = @m.xm6.m0[vds]
*plot Vov5 Vov6 Vds5 Vds6
let Vov7 = @m.xm7.m0[vdsat]
let Vov8 = @m.xm8.m0[vdsat]
let Vds7 = @m.xm7.m0[vds]
let Vds8 = @m.xm8.m0[vds]
*plot Vov7 Vov8 Vds7 Vds8
let Vov9 = @m.xm9.m0[vdsat] 
let Vds9 = @m.xm9.m0[vds]
let Vov12 = @m.xm12.m0[vdsat] 
let Vds12 = @m.xm12.m0[vds]
*plot Vov9 Vov12 Vds9 Vds12
let Vov10 = @m.xm10.m0[vdsat] 
let Vds10 = @m.xm10.m0[vds]
let Vov11 = @m.xm11.m0[vdsat] 
let Vds11 = @m.xm11.m0[vds]
*plot Vov10 Vov11 Vds10 Vds11
*let gds = @m.xm1.m0[gds]
*plot v(Vp) v(Vb1) v(Vb2) v(Vb3) 
*plot gds
plot v(OUT1) v(OUT2)
*plot i(VDD)
*write test_nfet_03v3.raw
.endc
"}
C {devices/lab_pin.sym} 240 -90 0 0 {name=p8 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} 530 -90 0 1 {name=p9 sig_type=std_logic lab=VSS}
